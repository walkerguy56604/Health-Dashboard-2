import pandas as pd
import matplotlib.pyplot as plt

# Load CSV
df = pd.read_csv("daily_snapshot_2025-12-28.csv")

# Create figure
fig, ax1 = plt.subplots(figsize=(10, 6))

# Plot BP
ax1.plot(df['Time/Context'], df['Systolic'], marker='o', color='red', label='Systolic')
ax1.plot(df['Time/Context'], df['Diastolic'], marker='o', color='blue', label='Diastolic')
ax1.set_ylabel('Blood Pressure (mmHg)')
ax1.set_xticklabels(df['Time/Context'], rotation=45, ha='right')

# Plot Heart Rate
ax2 = ax1.twinx()
ax2.plot(df['Time/Context'], df['Heart_Rate'], marker='x', linestyle='--', color='green', label='Heart Rate')
ax2.set_ylabel('Heart Rate (bpm)')

# Add Glucose & Weight as text annotations
for i, row in df.iterrows():
    if not pd.isna(row['Glucose']):
        ax1.text(i, row['Systolic']+5, f"G:{row['Glucose']}", color='purple', fontsize=9)
    if not pd.isna(row['Weight']):
        ax1.text(i, row['Diastolic']-10, f"W:{row['Weight']}", color='orange', fontsize=9)

# Titles and legends
plt.title('Daily Snapshot - 2025-12-28')
fig.tight_layout()
ax1.legend(loc='upper left')
ax2.legend(loc='upper right')

# Save as PNG
plt.savefig("daily_snapshot_2025-12-28.png")
plt.show()
