<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Health Dashboard</title>
<style>
  body { font-family: sans-serif; margin: 20px; }
  table { border-collapse: collapse; width: 100%; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  th { background-color: #f2f2f2; }
  tr.latest { background-color: #d1ffd1; }
</style>
<script>
async function loadData() {
  const ts = new Date().getTime(); // timestamp cache-buster
  try {
    const response = await fetch(`latest.json?ts=${ts}`);
    const data = await response.json();

    const tableBody = document.getElementById('health-data');
    tableBody.innerHTML = ''; // clear previous

    data.forEach((entry, index) => {
      const tr = document.createElement('tr');
      if(index === data.length - 1) tr.classList.add('latest');

      tr.innerHTML = `
        <td>${entry.date}</td>
        <td>${entry.systolic}</td>
        <td>${entry.diastolic}</td>
        <td>${entry.pulse}</td>
        <td>${entry.ihb}</td>
        <td>${entry.arm}</td>
        <td>${entry.position}</td>
        <td>${entry.symptoms}</td>
        <td>${entry.notes}</td>
      `;
      tableBody.appendChild(tr);
    });
  } catch (err) {
    console.error('Error loading health data:', err);
  }
}

window.onload = () => {
  loadData();
  setInterval(loadData, 15000); // refresh every 15 seconds
};
</script>
</head>
<body>
<h1>ðŸ©º Health Dashboard</h1>
<p>Latest readings auto-refresh every 15 seconds</p>
<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Systolic</th>
      <th>Diastolic</th>
      <th>Pulse</th>
      <th>IHB</th>
      <th>Arm</th>
      <th>Position</th>
      <th>Symptoms</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody id="health-data">
    <!-- Entries will populate here -->
  </tbody>
</table>
</body>
</html>
